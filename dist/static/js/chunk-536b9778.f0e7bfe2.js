(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-536b9778"],{"06c5":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a630"),a("fb6a"),a("b0c0"),a("d3b7"),a("ac1f"),a("00b4"),a("25f0"),a("3ca3");var n=a("6b75");function i(t,e){if(t){if("string"==typeof t)return Object(n["a"])(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(n["a"])(t,e):void 0}}},"25f0":function(t,e,a){"use strict";var n=a("6eeb"),i=a("825a"),r=a("d039"),o=a("ad6d"),c="toString",s=RegExp.prototype,l=s[c],u=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=c;(u||d)&&n(RegExp.prototype,c,(function(){var t=i(this),e=String(t.source),a=t.flags,n=String(void 0===a&&t instanceof RegExp&&!("flags"in s)?o.call(t):a);return"/"+e+"/"+n}),{unsafe:!0})},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a("6b75");function i(t){if(Array.isArray(t))return Object(n["a"])(t)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0");function r(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=a("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return i(t)||r(t)||Object(o["a"])(t)||c()}},"4df4":function(t,e,a){"use strict";var n=a("0366"),i=a("7b0b"),r=a("9bdd"),o=a("e95a"),c=a("50c4"),s=a("8418"),l=a("35a1");t.exports=function(t){var e,a,u,d,f,p,m=i(t),g="function"==typeof this?this:Array,h=arguments.length,y=h>1?arguments[1]:void 0,b=void 0!==y,v=l(m),T=0;if(b&&(y=n(y,h>2?arguments[2]:void 0,2)),void 0==v||g==Array&&o(v))for(e=c(m.length),a=new g(e);e>T;T++)p=b?y(m[T],T):m[T],s(a,T,p);else for(d=v.call(m),f=d.next,a=new g;!(u=f.call(d)).done;T++)p=b?r(d,y,[u.value,T],!0):u.value,s(a,T,p);return a.length=T,a}},"6b75":function(t,e,a){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=Array(e);a<e;a++)n[a]=t[a];return n}a.d(e,"a",(function(){return n}))},"8c5d":function(t,e,a){"use strict";a("aa99")},"8dd9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v(" 新建职业类型 ")]),a("el-input",{staticClass:"filter-item",staticStyle:{width:"250px","margin-left":"15px"},attrs:{placeholder:"搜索职业类型名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"occupationTypeTable",staticClass:"occupation-type-table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.formattedList,"element-loading-text":"数据加载中",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"occupationTypeId",align:"center",label:"ID",width:"90",sortable:""}}),a("el-table-column",{attrs:{prop:"name",label:"职业类型名称",align:"center","min-width":"200","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"name-cell"},[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"action-cell"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v(" 编辑 ")]),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v(" 删除 ")])],1)]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"left"},attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,50,100],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("occupation-type-dialog",{attrs:{visible:t.dialogVisible,"occupation-type-data":t.currentOccupationType,"dialog-type":t.dialogType},on:{"update:visible":function(e){t.dialogVisible=e},refresh:t.handleRefresh}})],1)},i=[],r=a("5530"),o=a("2909"),c=(a("d81d"),a("b0c0"),a("d3b7"),a("0643"),a("a573"),a("b775"));function s(t){return Object(c["a"])({url:"/occupation-types",method:"get",params:t})}function l(t){return Object(c["a"])({url:"/occupation-types",method:"post",data:t})}function u(t){return Object(c["a"])({url:"/occupation-types/".concat(t.occupationTypeId),method:"put",data:t})}function d(t){return Object(c["a"])({url:"/occupation-types/".concat(t),method:"delete"})}var f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.dialogTypeMap[t.dialogType],visible:t.visible,width:"500px"},on:{"update:visible":function(e){t.visible=e},close:t.resetForm}},[a("el-form",{ref:"form",attrs:{model:t.formData,"label-width":"120px",rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[a("el-form-item",{attrs:{label:"职业类型名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入职业类型名称",maxlength:"50","show-word-limit":""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name","string"===typeof e?e.trim():e)},expression:"formData.name"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.submitting},on:{click:t.submitForm}},[t._v(" 提交 ")])],1)],1)},p=[],m=(a("99af"),a("caad"),{name:"OccupationTypeDialog",props:{visible:{type:Boolean,required:!0},occupationTypeData:{type:Object,default:function(){return{}}},dialogType:{type:String,validator:function(t){return["create","edit"].includes(t)},default:"create"}},data:function(){var t={occupationTypeId:null,name:""};return{dialogTypeMap:{create:"新建职业类型",edit:"编辑职业类型"},formData:Object(r["a"])({},t),rules:{name:[{required:!0,message:"请输入职业类型名称",trigger:"blur"},{min:2,max:50,message:"名称长度在2到50个字符",trigger:"blur"}]},submitting:!1}},watch:{occupationTypeData:{handler:function(t){this.formData=Object(r["a"])(Object(r["a"])({},this.formData),t)},immediate:!0,deep:!0},visible:function(t){this.$emit("update:visible",t)}},methods:{resetForm:function(){this.$refs.form&&this.$refs.form.resetFields(),this.submitting=!1,this.formData=Object(r["a"])({},this.defaultForm)},submitForm:function(){var t=this;this.$refs.form.validate((function(e){if(e){t.submitting=!0;var a=Object(r["a"])({},t.formData),n="create"===t.dialogType?l:u;n(a).then((function(e){2e4===e.code?(t.$message.success("".concat(t.dialogTypeMap[t.dialogType],"成功")),t.$emit("refresh"),t.visible=!1):t.$message.error(e.message||"".concat(t.dialogTypeMap[t.dialogType],"失败"))})).catch((function(e){console.error("操作失败:",e),t.$message.error("".concat(t.dialogTypeMap[t.dialogType],"失败: ").concat(e.message||"请联系管理员"))})).finally((function(){t.submitting=!1}))}}))}}}),g=m,h=(a("8c5d"),a("2877")),y=Object(h["a"])(g,f,p,!1,null,"5f3a8762",null),b=y.exports,v={name:"OccupationTypeList",components:{OccupationTypeDialog:b},data:function(){return{rawList:[],total:0,totalPages:1,listLoading:!0,listQuery:{page:1,limit:10,name:null},dialogVisible:!1,dialogType:"create",currentOccupationType:{}}},computed:{formattedList:function(){return this.rawList.map((function(t){return{occupationTypeId:t.occupationTypeId,name:t.name}}))}},mounted:function(){var t=this;this.$nextTick((function(){window.addEventListener("resize",t.doLayout)}))},beforeDestroy:function(){window.removeEventListener("resize",this.doLayout)},created:function(){this.fetchData()},methods:{handleRefresh:function(){this.dialogVisible=!1,this.fetchData()},doLayout:function(){this.$refs.occupationTypeTable.doLayout()},fetchData:function(){var t=this;this.listLoading=!0;var e={pageNum:this.listQuery.page,pageSize:this.listQuery.limit,name:this.listQuery.name};s(e).then((function(e){if(2e4===e.code){var a=e.data.page;if(t.totalPages=Math.max(1,Math.ceil(a.total/t.listQuery.limit)),t.total=a.total,t.listQuery.page>t.totalPages&&t.totalPages>0)return t.listQuery.page=t.totalPages,void t.$nextTick((function(){t.fetchData()}));t.rawList=Object(o["a"])(a.records),t.$nextTick(t.doLayout)}else t.$message.error(e.message||"获取职业类型列表失败");t.listLoading=!1})).catch((function(e){t.listLoading=!1,console.error("获取职业类型列表失败:",e),t.$message.error("获取职业类型列表失败")}))},handleSizeChange:function(t){this.listQuery.limit=t,this.fetchData()},handleCurrentChange:function(t){this.listQuery.page=t,this.fetchData()},handleFilter:function(){this.listQuery.page=1,this.fetchData()},handleCreate:function(){this.dialogType="create",this.currentOccupationType={},this.dialogVisible=!0},handleEdit:function(t){this.dialogType="edit",this.currentOccupationType=Object(r["a"])({},t),this.dialogVisible=!0},handleDelete:function(t){var e=this;this.$confirm('确定删除职业类型 "'.concat(t.name,'" 吗？'),"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(t.occupationTypeId)})).then((function(t){2e4===t.code?(e.$message.success("删除成功"),1===e.rawList.length&&e.totalPages>1&&(e.listQuery.page=Math.max(1,e.listQuery.page-1)),e.fetchData()):e.$message.error(t.message||"删除失败")})).catch((function(t){"cancel"!==t&&(console.error("删除失败:",t),e.$message.error("删除失败"))}))}}},T=v,w=(a("acf0"),Object(h["a"])(T,n,i,!1,null,"00a49d93",null));e["default"]=w.exports},a630:function(t,e,a){var n=a("23e7"),i=a("4df4"),r=a("1c7e"),o=!r((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:o},{from:i})},aa99:function(t,e,a){},acf0:function(t,e,a){"use strict";a("b1d3")},b1d3:function(t,e,a){}}]);