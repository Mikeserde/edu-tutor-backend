(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46257fb2"],{"09c9":function(t,e,r){"use strict";r("9339")},"0ccb":function(t,e,r){var n=r("50c4"),a=r("1148"),i=r("1d80"),o=Math.ceil,s=function(t){return function(e,r,s){var l,c,u=String(i(e)),d=u.length,f=void 0===s?" ":String(s),g=n(r);return g<=d||""==f?u:(l=g-d,c=a.call(f,o(l/f.length)),c.length>l&&(c=c.slice(0,l)),t?u+c:c+u)}};t.exports={start:s(!1),end:s(!0)}},1148:function(t,e,r){"use strict";var n=r("a691"),a=r("1d80");t.exports="".repeat||function(t){var e=String(a(this)),r="",i=n(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(r+=e);return r}},"14c3":function(t,e,r){var n=r("c6b6"),a=r("9263");t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var i=r.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"18f6":function(t,e,r){},"25f0":function(t,e,r){"use strict";var n=r("6eeb"),a=r("825a"),i=r("d039"),o=r("ad6d"),s="toString",l=RegExp.prototype,c=l[s],u=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=s;(u||d)&&n(RegExp.prototype,s,(function(){var t=a(this),e=String(t.source),r=t.flags,n=String(void 0===r&&t instanceof RegExp&&!("flags"in l)?o.call(t):r);return"/"+e+"/"+n}),{unsafe:!0})},2909:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function a(t){if(Array.isArray(t))return n(t)}r.d(e,"a",(function(){return l}));r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function i(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}r("fb6a"),r("b0c0"),r("ac1f"),r("00b4"),r("25f0");function o(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return a(t)||i(t)||o(t)||s()}},"2c3e":function(t,e,r){var n=r("83ab"),a=r("9f7f").UNSUPPORTED_Y,i=r("9bf2").f,o=r("69f3").get,s=RegExp.prototype;n&&a&&i(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==s){if(this instanceof RegExp)return!!o(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},"41be":function(t,e,r){"use strict";r("18f6")},"4d63":function(t,e,r){var n=r("83ab"),a=r("da84"),i=r("94ca"),o=r("7156"),s=r("9bf2").f,l=r("241c").f,c=r("44e7"),u=r("ad6d"),d=r("9f7f"),f=r("6eeb"),g=r("d039"),p=r("69f3").set,h=r("2626"),m=r("b622"),b=m("match"),v=a.RegExp,y=v.prototype,x=/a/g,w=/a/g,E=new v(x)!==x,S=d.UNSUPPORTED_Y,$=n&&i("RegExp",!E||S||g((function(){return w[b]=!1,v(x)!=x||v(w)==w||"/a/i"!=v(x,"i")})));if($){var D=function(t,e){var r,n=this instanceof D,a=c(t),i=void 0===e;if(!n&&a&&t.constructor===D&&i)return t;E?a&&!i&&(t=t.source):t instanceof D&&(i&&(e=u.call(t)),t=t.source),S&&(r=!!e&&e.indexOf("y")>-1,r&&(e=e.replace(/y/g,"")));var s=o(E?new v(t,e):v(t,e),n?this:y,D);return S&&r&&p(s,{sticky:r}),s},T=function(t){t in D||s(D,t,{configurable:!0,get:function(){return v[t]},set:function(e){v[t]=e}})},_=l(v),k=0;while(_.length>k)T(_[k++]);y.constructor=D,D.prototype=y,f(a,"RegExp",D)}h("RegExp")},"4d90":function(t,e,r){"use strict";var n=r("23e7"),a=r("0ccb").start,i=r("9a0c");n({target:"String",proto:!0,forced:i},{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,r){"use strict";var n=r("0366"),a=r("7b0b"),i=r("9bdd"),o=r("e95a"),s=r("50c4"),l=r("8418"),c=r("35a1");t.exports=function(t){var e,r,u,d,f,g,p=a(t),h="function"==typeof this?this:Array,m=arguments.length,b=m>1?arguments[1]:void 0,v=void 0!==b,y=c(p),x=0;if(v&&(b=n(b,m>2?arguments[2]:void 0,2)),void 0==y||h==Array&&o(y))for(e=s(p.length),r=new h(e);e>x;x++)g=v?b(p[x],x):p[x],l(r,x,g);else for(d=y.call(p),f=d.next,r=new h;!(u=f.call(d)).done;x++)g=v?i(d,b,[u.value,x],!0):u.value,l(r,x,g);return r.length=x,r}},5319:function(t,e,r){"use strict";var n=r("d784"),a=r("825a"),i=r("7b0b"),o=r("50c4"),s=r("a691"),l=r("1d80"),c=r("8aa5"),u=r("14c3"),d=Math.max,f=Math.min,g=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,r,n){var b=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=n.REPLACE_KEEPS_$0,y=b?"$":"$0";return[function(r,n){var a=l(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,a,n):e.call(String(a),r,n)},function(t,n){if(!b&&v||"string"===typeof n&&-1===n.indexOf(y)){var i=r(e,t,this,n);if(i.done)return i.value}var l=a(t),g=String(this),p="function"===typeof n;p||(n=String(n));var h=l.global;if(h){var w=l.unicode;l.lastIndex=0}var E=[];while(1){var S=u(l,g);if(null===S)break;if(E.push(S),!h)break;var $=String(S[0]);""===$&&(l.lastIndex=c(g,o(l.lastIndex),w))}for(var D="",T=0,_=0;_<E.length;_++){S=E[_];for(var k=String(S[0]),P=d(f(s(S.index),g.length),0),R=[],L=1;L<S.length;L++)R.push(m(S[L]));var O=S.groups;if(p){var j=[k].concat(R,P,g);void 0!==O&&j.push(O);var A=String(n.apply(void 0,j))}else A=x(k,g,P,R,O,n);P>=T&&(D+=g.slice(T,P)+A,T=P+k.length)}return D+g.slice(T)}];function x(t,r,n,a,o,s){var l=n+t.length,c=a.length,u=h;return void 0!==o&&(o=i(o),u=p),e.call(s,u,(function(e,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return r.slice(0,n);case"'":return r.slice(l);case"<":s=o[i.slice(1,-1)];break;default:var u=+i;if(0===u)return e;if(u>c){var d=g(u/10);return 0===d?e:d<=c?void 0===a[d-1]?i.charAt(1):a[d-1]+i.charAt(1):e}s=a[u-1]}return void 0===s?"":s}))}}))},"8aa5":function(t,e,r){"use strict";var n=r("6547").charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},9339:function(t,e,r){},"9a0c":function(t,e,r){var n=r("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},a630:function(t,e,r){var n=r("23e7"),a=r("4df4"),i=r("1c7e"),o=!i((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:o},{from:a})},d784:function(t,e,r){"use strict";r("ac1f");var n=r("6eeb"),a=r("d039"),i=r("b622"),o=r("9263"),s=r("9112"),l=i("species"),c=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),g=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));t.exports=function(t,e,r,d){var p=i(t),h=!a((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),m=h&&!a((function(){var e=!1,r=/a/;return"split"===t&&(r={},r.constructor={},r.constructor[l]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return e=!0,null},r[p](""),!e}));if(!h||!m||"replace"===t&&(!c||!u||f)||"split"===t&&!g){var b=/./[p],v=r(p,""[t],(function(t,e,r,n,a){return e.exec===o?h&&!a?{done:!0,value:b.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),y=v[0],x=v[1];n(String.prototype,t,y),n(RegExp.prototype,p,2==e?function(t,e){return x.call(t,this,e)}:function(t){return x.call(t,this)})}d&&s(RegExp.prototype[p],"sham",!0)}},ea99:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v(" 新建学生 ")]),r("el-input",{staticClass:"filter-item",staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"搜索学生姓名"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"studentTable",staticClass:"student-table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.formattedList,"element-loading-text":"数据加载中",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{prop:"studentId",align:"center",label:"ID",width:"90",sortable:""}}),r("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center","min-width":"120"}}),r("el-table-column",{attrs:{prop:"gender",label:"性别",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tag",{attrs:{type:"男"===e.row.gender?"primary":"danger",size:"small"}},[t._v(" "+t._s(e.row.gender)+" ")])]}}])}),r("el-table-column",{attrs:{prop:"contactPhone",label:"联系电话",align:"center","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatPhone(e.row.contactPhone))+" ")]}}])}),r("el-table-column",{attrs:{prop:"address",label:"地址",align:"center","min-width":"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tooltip",{attrs:{effect:"light",content:e.row.address,placement:"top"}},[r("span",[t._v(t._s(e.row.address))])])]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticClass:"action-cell"},[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(r){return t.handleEdit(e.row)}}},[t._v(" 编辑 ")]),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return t.handleDelete(e.row)}}},[t._v(" 删除 ")])],1)]}}])})],1),r("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"left"},attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,50,100],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),r("student-dialog",{attrs:{visible:t.dialogVisible,"student-data":t.currentStudent,"dialog-type":t.dialogType},on:{"update:visible":function(e){t.dialogVisible=e},refresh:t.handleRefresh}})],1)},a=[],i=r("2909"),o=r("5530"),s=(r("d81d"),r("b0c0"),r("d3b7"),r("0643"),r("a573"),r("b775"));function l(t){return Object(s["a"])({url:"/students",method:"get",params:t})}function c(t){return Object(s["a"])({url:"/students",method:"post",data:t})}function u(t){return Object(s["a"])({url:"/students/".concat(t.studentId),method:"put",data:t})}function d(t){return Object(s["a"])({url:"/students/".concat(t),method:"delete"})}var f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:t.dialogTypeMap[t.dialogType],visible:t.visible,width:"650px"},on:{"update:visible":function(e){t.visible=e},close:t.resetForm}},[r("el-form",{ref:"form",attrs:{model:t.formData,"label-width":"100px",rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入学生姓名"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name","string"===typeof e?e.trim():e)},expression:"formData.name"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"gender"}},[r("el-radio-group",{model:{value:t.formData.gender,callback:function(e){t.$set(t.formData,"gender",e)},expression:"formData.gender"}},[r("el-radio",{attrs:{label:"男"}},[t._v("男")]),r("el-radio",{attrs:{label:"女"}},[t._v("女")])],1)],1),r("el-form-item",{attrs:{label:"联系电话",prop:"contactPhone"}},[r("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.formData.contactPhone,callback:function(e){t.$set(t.formData,"contactPhone","string"===typeof e?e.trim():e)},expression:"formData.contactPhone"}})],1),r("el-form-item",{attrs:{label:"地址",prop:"address"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入学生地址",maxlength:"100","show-word-limit":""},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address","string"===typeof e?e.trim():e)},expression:"formData.address"}})],1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),r("el-button",{attrs:{type:"primary",loading:t.submitting},on:{click:t.submitForm}},[t._v(" 提交 ")])],1)],1)},g=[],p=(r("99af"),r("caad"),{name:"StudentDialog",props:{visible:{type:Boolean,required:!0},studentData:{type:Object,default:function(){return{}}},dialogType:{type:String,validator:function(t){return["create","edit"].includes(t)},default:"create"}},data:function(){var t={studentId:null,name:"",gender:"男",contactPhone:"",address:""};return{dialogTypeMap:{create:"新建学生",edit:"编辑学生"},formData:Object(o["a"])({},t),rules:{name:[{required:!0,message:"请输入学生姓名",trigger:"blur"},{min:2,max:50,message:"姓名长度在2到50个字符",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{max:20,message:"联系电话不能超过20个字符",trigger:"blur"},{pattern:/^1\d{10}$|^0\d{2,3}-?\d{7,8}$/,message:"请输入有效的联系电话",trigger:"blur"}],address:[{required:!0,message:"请输入学生地址",trigger:"blur"},{max:100,message:"地址不能超过100个字符",trigger:"blur"}]},submitting:!1}},watch:{studentData:{handler:function(t){this.formData=Object(o["a"])(Object(o["a"])({},this.formData),t)},immediate:!0,deep:!0},visible:function(t){this.$emit("update:visible",t)}},methods:{resetForm:function(){this.$refs.form&&this.$refs.form.resetFields(),this.submitting=!1,this.formData=Object(o["a"])({},this.defaultForm)},submitForm:function(){var t=this;this.$refs.form.validate((function(e){if(e){t.submitting=!0;var r=Object(o["a"])({},t.formData),n="create"===t.dialogType?c:u;n(r).then((function(e){2e4===e.code?(t.$message.success("".concat(t.dialogTypeMap[t.dialogType],"成功")),t.$emit("refresh"),t.visible=!1):t.$message.error(e.message||"".concat(t.dialogTypeMap[t.dialogType],"失败"))})).catch((function(e){console.error("操作失败:",e),t.$message.error("".concat(t.dialogTypeMap[t.dialogType],"失败: ").concat(e.message||"请联系管理员"))})).finally((function(){t.submitting=!1}))}}))}}}),h=p,m=(r("41be"),r("2877")),b=Object(m["a"])(h,f,g,!1,null,"28be1464",null),v=b.exports,y=r("ed08"),x={name:"StudentList",components:{StudentDialog:v},data:function(){return{rawList:[],total:0,listLoading:!0,listQuery:{page:1,limit:10,name:null,gender:null},dialogVisible:!1,dialogType:"create",currentStudent:{}}},computed:{formattedList:function(){return this.rawList.map((function(t){return{studentId:t.studentId,name:t.name,gender:t.gender,contactPhone:t.contactPhone,address:t.address}}))}},mounted:function(){var t=this;this.$nextTick((function(){window.addEventListener("resize",t.doLayout)}))},beforeDestroy:function(){window.removeEventListener("resize",this.doLayout)},created:function(){this.fetchData()},methods:{formatPhone:y["a"],handleRefresh:function(){this.dialogVisible=!1,this.fetchData()},doLayout:function(){this.$refs.studentTable.doLayout()},handleSizeChange:function(t){this.listQuery.limit=t,this.fetchData()},handleCurrentChange:function(t){this.listQuery.page=t,this.fetchData()},handleFilter:function(){this.listQuery.page=1,this.fetchData()},handleCreate:function(){this.dialogType="create",this.currentStudent={},this.dialogVisible=!0},handleEdit:function(t){this.dialogType="edit",this.currentStudent=Object(o["a"])({},t),this.dialogVisible=!0},fetchData:function(){var t=this;this.listLoading=!0;var e={pageNum:this.listQuery.page,pageSize:this.listQuery.limit,name:this.listQuery.name,gender:this.listQuery.gender,grade:this.listQuery.grade};l(e).then((function(e){if(2e4===e.code){var r=e.data.page;if(t.totalPages=Math.max(1,Math.ceil(r.total/t.listQuery.limit)),t.listQuery.page>t.totalPages&&t.totalPages>0)return t.listQuery.page=t.totalPages,void t.$nextTick((function(){t.fetchData()}));t.rawList=Object(i["a"])(r.records),t.total=r.total,t.$nextTick(t.doLayout)}else t.$message.error(e.message||"获取学生列表失败");t.listLoading=!1})).catch((function(e){t.listLoading=!1,console.error("获取学生列表失败:",e),t.$message.error("获取学生列表失败")}))},handleDelete:function(t){var e=this;this.$confirm("确定删除学生 ".concat(t.name," 吗？"),"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(t.studentId)})).then((function(t){2e4===t.code?(e.$message.success("删除成功"),1===e.rawList.length&&e.listQuery.page>1&&(e.listQuery.page-=1),e.fetchData()):e.$message.error(t.message||"删除失败")})).catch((function(t){"cancel"!==t&&(console.error("删除失败:",t),e.$message.error("删除失败"))}))}}},w=x,E=(r("09c9"),Object(m["a"])(w,n,a,!1,null,"feca2278",null));e["default"]=E.exports},ed08:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return i}));var n=r("53ca");r("d3b7"),r("4d63"),r("ac1f"),r("2c3e"),r("00b4"),r("25f0"),r("4d90"),r("5319"),r("0643"),r("4e3e"),r("159b");function a(t,e){if(0===arguments.length||!t)return null;var r,a=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(n["a"])(t)?r=t:("string"===typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"===typeof t&&10===t.toString().length&&(t*=1e3),r=new Date(t));var i={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()},o=a.replace(/{([ymdhisa])+}/g,(function(t,e){var r=i[e];return"a"===e?["日","一","二","三","四","五","六"][r]:r.toString().padStart(2,"0")}));return o}function i(t){if(!t)return"";var e=t.replace(/\D/g,"");return 11===e.length?e.replace(/(\d{3})(\d{4})(\d{4})/,"$1 $2 $3"):10===e.length?e.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"):t}}}]);