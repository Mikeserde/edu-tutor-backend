(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bd38c9e"],{"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("ac1f"),n("00b4"),n("25f0"),n("3ca3");var r=n("6b75");function a(t,e){if(t){if("string"==typeof t)return Object(r["a"])(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(t,e):void 0}}},"09c9":function(t,e,n){"use strict";n("9339")},"0ccb":function(t,e,n){var r=n("50c4"),a=n("1148"),i=n("1d80"),o=Math.ceil,c=function(t){return function(e,n,c){var s,l,u=String(i(e)),d=u.length,f=void 0===c?" ":String(c),g=r(n);return g<=d||""==f?u:(s=g-d,l=a.call(f,o(s/f.length)),l.length>s&&(l=l.slice(0,s)),t?u+l:l+u)}};t.exports={start:c(!1),end:c(!0)}},1148:function(t,e,n){"use strict";var r=n("a691"),a=n("1d80");t.exports="".repeat||function(t){var e=String(a(this)),n="",i=r(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},"14c3":function(t,e,n){var r=n("c6b6"),a=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var i=n.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"18f6":function(t,e,n){},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),a=n("825a"),i=n("d039"),o=n("ad6d"),c="toString",s=RegExp.prototype,l=s[c],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=c;(u||d)&&r(RegExp.prototype,c,(function(){var t=a(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in s)?o.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("6b75");function a(t){if(Array.isArray(t))return Object(r["a"])(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function i(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=n("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return a(t)||i(t)||Object(o["a"])(t)||c()}},"2c3e":function(t,e,n){var r=n("83ab"),a=n("9f7f").UNSUPPORTED_Y,i=n("9bf2").f,o=n("69f3").get,c=RegExp.prototype;r&&a&&i(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==c){if(this instanceof RegExp)return!!o(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},"41be":function(t,e,n){"use strict";n("18f6")},"4d63":function(t,e,n){var r=n("83ab"),a=n("da84"),i=n("94ca"),o=n("7156"),c=n("9bf2").f,s=n("241c").f,l=n("44e7"),u=n("ad6d"),d=n("9f7f"),f=n("6eeb"),g=n("d039"),p=n("69f3").set,h=n("2626"),m=n("b622"),b=m("match"),v=a.RegExp,y=v.prototype,x=/a/g,w=/a/g,E=new v(x)!==x,S=d.UNSUPPORTED_Y,$=r&&i("RegExp",!E||S||g((function(){return w[b]=!1,v(x)!=x||v(w)==w||"/a/i"!=v(x,"i")})));if($){var D=function(t,e){var n,r=this instanceof D,a=l(t),i=void 0===e;if(!r&&a&&t.constructor===D&&i)return t;E?a&&!i&&(t=t.source):t instanceof D&&(i&&(e=u.call(t)),t=t.source),S&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var c=o(E?new v(t,e):v(t,e),r?this:y,D);return S&&n&&p(c,{sticky:n}),c},T=function(t){t in D||c(D,t,{configurable:!0,get:function(){return v[t]},set:function(e){v[t]=e}})},_=s(v),k=0;while(_.length>k)T(_[k++]);y.constructor=D,D.prototype=y,f(a,"RegExp",D)}h("RegExp")},"4d90":function(t,e,n){"use strict";var r=n("23e7"),a=n("0ccb").start,i=n("9a0c");r({target:"String",proto:!0,forced:i},{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,n){"use strict";var r=n("0366"),a=n("7b0b"),i=n("9bdd"),o=n("e95a"),c=n("50c4"),s=n("8418"),l=n("35a1");t.exports=function(t){var e,n,u,d,f,g,p=a(t),h="function"==typeof this?this:Array,m=arguments.length,b=m>1?arguments[1]:void 0,v=void 0!==b,y=l(p),x=0;if(v&&(b=r(b,m>2?arguments[2]:void 0,2)),void 0==y||h==Array&&o(y))for(e=c(p.length),n=new h(e);e>x;x++)g=v?b(p[x],x):p[x],s(n,x,g);else for(d=y.call(p),f=d.next,n=new h;!(u=f.call(d)).done;x++)g=v?i(d,b,[u.value,x],!0):u.value,s(n,x,g);return n.length=x,n}},5319:function(t,e,n){"use strict";var r=n("d784"),a=n("825a"),i=n("7b0b"),o=n("50c4"),c=n("a691"),s=n("1d80"),l=n("8aa5"),u=n("14c3"),d=Math.max,f=Math.min,g=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,n,r){var b=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=r.REPLACE_KEEPS_$0,y=b?"$":"$0";return[function(n,r){var a=s(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,a,r):e.call(String(a),n,r)},function(t,r){if(!b&&v||"string"===typeof r&&-1===r.indexOf(y)){var i=n(e,t,this,r);if(i.done)return i.value}var s=a(t),g=String(this),p="function"===typeof r;p||(r=String(r));var h=s.global;if(h){var w=s.unicode;s.lastIndex=0}var E=[];while(1){var S=u(s,g);if(null===S)break;if(E.push(S),!h)break;var $=String(S[0]);""===$&&(s.lastIndex=l(g,o(s.lastIndex),w))}for(var D="",T=0,_=0;_<E.length;_++){S=E[_];for(var k=String(S[0]),P=d(f(c(S.index),g.length),0),R=[],O=1;O<S.length;O++)R.push(m(S[O]));var j=S.groups;if(p){var L=[k].concat(R,P,g);void 0!==j&&L.push(j);var A=String(r.apply(void 0,L))}else A=x(k,g,P,R,j,r);P>=T&&(D+=g.slice(T,P)+A,T=P+k.length)}return D+g.slice(T)}];function x(t,n,r,a,o,c){var s=r+t.length,l=a.length,u=h;return void 0!==o&&(o=i(o),u=p),e.call(c,u,(function(e,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":c=o[i.slice(1,-1)];break;default:var u=+i;if(0===u)return e;if(u>l){var d=g(u/10);return 0===d?e:d<=l?void 0===a[d-1]?i.charAt(1):a[d-1]+i.charAt(1):e}c=a[u-1]}return void 0===c?"":c}))}}))},"6b75":function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},9339:function(t,e,n){},"9a0c":function(t,e,n){var r=n("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},a630:function(t,e,n){var r=n("23e7"),a=n("4df4"),i=n("1c7e"),o=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:o},{from:a})},d784:function(t,e,n){"use strict";n("ac1f");var r=n("6eeb"),a=n("d039"),i=n("b622"),o=n("9263"),c=n("9112"),s=i("species"),l=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),g=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,d){var p=i(t),h=!a((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),m=h&&!a((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[s]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!h||!m||"replace"===t&&(!l||!u||f)||"split"===t&&!g){var b=/./[p],v=n(p,""[t],(function(t,e,n,r,a){return e.exec===o?h&&!a?{done:!0,value:b.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),y=v[0],x=v[1];r(String.prototype,t,y),r(RegExp.prototype,p,2==e?function(t,e){return x.call(t,this,e)}:function(t){return x.call(t,this)})}d&&c(RegExp.prototype[p],"sham",!0)}},ea99:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v(" 新建学生 ")]),n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"搜索学生姓名"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}})],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"studentTable",staticClass:"student-table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.formattedList,"element-loading-text":"数据加载中",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"studentId",align:"center",label:"ID",width:"90",sortable:""}}),n("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center","min-width":"120"}}),n("el-table-column",{attrs:{prop:"gender",label:"性别",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:"男"===e.row.gender?"primary":"danger",size:"small"}},[t._v(" "+t._s(e.row.gender)+" ")])]}}])}),n("el-table-column",{attrs:{prop:"contactPhone",label:"联系电话",align:"center","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatPhone(e.row.contactPhone))+" ")]}}])}),n("el-table-column",{attrs:{prop:"address",label:"地址",align:"center","min-width":"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{attrs:{effect:"light",content:e.row.address,placement:"top"}},[n("span",[t._v(t._s(e.row.address))])])]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"action-cell"},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return t.handleEdit(e.row)}}},[t._v(" 编辑 ")]),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(n){return t.handleDelete(e.row)}}},[t._v(" 删除 ")])],1)]}}])})],1),n("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"left"},attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,50,100],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),n("student-dialog",{attrs:{visible:t.dialogVisible,"student-data":t.currentStudent,"dialog-type":t.dialogType},on:{"update:visible":function(e){t.dialogVisible=e},refresh:t.handleRefresh}})],1)},a=[],i=n("2909"),o=n("5530"),c=(n("d81d"),n("b0c0"),n("d3b7"),n("0643"),n("a573"),n("b775"));function s(t){return Object(c["a"])({url:"/students",method:"get",params:t})}function l(t){return Object(c["a"])({url:"/students",method:"post",data:t})}function u(t){return Object(c["a"])({url:"/students/".concat(t.studentId),method:"put",data:t})}function d(t){return Object(c["a"])({url:"/students/".concat(t),method:"delete"})}var f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.dialogTypeMap[t.dialogType],visible:t.visible,width:"650px"},on:{"update:visible":function(e){t.visible=e},close:t.resetForm}},[n("el-form",{ref:"form",attrs:{model:t.formData,"label-width":"100px",rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入学生姓名"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name","string"===typeof e?e.trim():e)},expression:"formData.name"}})],1),n("el-form-item",{attrs:{label:"性别",prop:"gender"}},[n("el-radio-group",{model:{value:t.formData.gender,callback:function(e){t.$set(t.formData,"gender",e)},expression:"formData.gender"}},[n("el-radio",{attrs:{label:"男"}},[t._v("男")]),n("el-radio",{attrs:{label:"女"}},[t._v("女")])],1)],1),n("el-form-item",{attrs:{label:"联系电话",prop:"contactPhone"}},[n("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.formData.contactPhone,callback:function(e){t.$set(t.formData,"contactPhone","string"===typeof e?e.trim():e)},expression:"formData.contactPhone"}})],1),n("el-form-item",{attrs:{label:"地址",prop:"address"}},[n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入学生地址",maxlength:"100","show-word-limit":""},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address","string"===typeof e?e.trim():e)},expression:"formData.address"}})],1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),n("el-button",{attrs:{type:"primary",loading:t.submitting},on:{click:t.submitForm}},[t._v(" 提交 ")])],1)],1)},g=[],p=(n("99af"),n("caad"),{name:"StudentDialog",props:{visible:{type:Boolean,required:!0},studentData:{type:Object,default:function(){return{}}},dialogType:{type:String,validator:function(t){return["create","edit"].includes(t)},default:"create"}},data:function(){var t={studentId:null,name:"",gender:"男",contactPhone:"",address:""};return{dialogTypeMap:{create:"新建学生",edit:"编辑学生"},formData:Object(o["a"])({},t),rules:{name:[{required:!0,message:"请输入学生姓名",trigger:"blur"},{min:2,max:50,message:"姓名长度在2到50个字符",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{max:20,message:"联系电话不能超过20个字符",trigger:"blur"},{pattern:/^1\d{10}$|^0\d{2,3}-?\d{7,8}$/,message:"请输入有效的联系电话",trigger:"blur"}],address:[{required:!0,message:"请输入学生地址",trigger:"blur"},{max:100,message:"地址不能超过100个字符",trigger:"blur"}]},submitting:!1}},watch:{studentData:{handler:function(t){this.formData=Object(o["a"])(Object(o["a"])({},this.formData),t)},immediate:!0,deep:!0},visible:function(t){this.$emit("update:visible",t)}},methods:{resetForm:function(){this.$refs.form&&this.$refs.form.resetFields(),this.submitting=!1,this.formData=Object(o["a"])({},this.defaultForm)},submitForm:function(){var t=this;this.$refs.form.validate((function(e){if(e){t.submitting=!0;var n=Object(o["a"])({},t.formData),r="create"===t.dialogType?l:u;r(n).then((function(e){2e4===e.code?(t.$message.success("".concat(t.dialogTypeMap[t.dialogType],"成功")),t.$emit("refresh"),t.visible=!1):t.$message.error(e.message||"".concat(t.dialogTypeMap[t.dialogType],"失败"))})).catch((function(e){console.error("操作失败:",e),t.$message.error("".concat(t.dialogTypeMap[t.dialogType],"失败: ").concat(e.message||"请联系管理员"))})).finally((function(){t.submitting=!1}))}}))}}}),h=p,m=(n("41be"),n("2877")),b=Object(m["a"])(h,f,g,!1,null,"28be1464",null),v=b.exports,y=n("ed08"),x={name:"StudentList",components:{StudentDialog:v},data:function(){return{rawList:[],total:0,listLoading:!0,listQuery:{page:1,limit:10,name:null,gender:null},dialogVisible:!1,dialogType:"create",currentStudent:{}}},computed:{formattedList:function(){return this.rawList.map((function(t){return{studentId:t.studentId,name:t.name,gender:t.gender,contactPhone:t.contactPhone,address:t.address}}))}},mounted:function(){var t=this;this.$nextTick((function(){window.addEventListener("resize",t.doLayout)}))},beforeDestroy:function(){window.removeEventListener("resize",this.doLayout)},created:function(){this.fetchData()},methods:{formatPhone:y["b"],handleRefresh:function(){this.dialogVisible=!1,this.fetchData()},doLayout:function(){this.$refs.studentTable.doLayout()},handleSizeChange:function(t){this.listQuery.limit=t,this.fetchData()},handleCurrentChange:function(t){this.listQuery.page=t,this.fetchData()},handleFilter:function(){this.listQuery.page=1,this.fetchData()},handleCreate:function(){this.dialogType="create",this.currentStudent={},this.dialogVisible=!0},handleEdit:function(t){this.dialogType="edit",this.currentStudent=Object(o["a"])({},t),this.dialogVisible=!0},fetchData:function(){var t=this;this.listLoading=!0;var e={pageNum:this.listQuery.page,pageSize:this.listQuery.limit,name:this.listQuery.name,gender:this.listQuery.gender,grade:this.listQuery.grade};s(e).then((function(e){if(2e4===e.code){var n=e.data.page;if(t.totalPages=Math.max(1,Math.ceil(n.total/t.listQuery.limit)),t.listQuery.page>t.totalPages&&t.totalPages>0)return t.listQuery.page=t.totalPages,void t.$nextTick((function(){t.fetchData()}));t.rawList=Object(i["a"])(n.records),t.total=n.total,t.$nextTick(t.doLayout)}else t.$message.error(e.message||"获取学生列表失败");t.listLoading=!1})).catch((function(e){t.listLoading=!1,console.error("获取学生列表失败:",e),t.$message.error("获取学生列表失败")}))},handleDelete:function(t){var e=this;this.$confirm("确定删除学生 ".concat(t.name," 吗？"),"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(t.studentId)})).then((function(t){2e4===t.code?(e.$message.success("删除成功"),1===e.rawList.length&&e.listQuery.page>1&&(e.listQuery.page-=1),e.fetchData()):e.$message.error(t.message||"删除失败")})).catch((function(t){"cancel"!==t&&(console.error("删除失败:",t),e.$message.error("删除失败"))}))}}},w=x,E=(n("09c9"),Object(m["a"])(w,r,a,!1,null,"feca2278",null));e["default"]=E.exports},ed08:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n("53ca");n("99af"),n("d3b7"),n("4d63"),n("ac1f"),n("2c3e"),n("00b4"),n("25f0"),n("4d90"),n("5319"),n("0643"),n("4e3e"),n("159b");function a(t,e){if(0===arguments.length||!t)return null;var n,a=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(r["a"])(t)?n=t:("string"===typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"===typeof t&&10===t.toString().length&&(t*=1e3),n=new Date(t));var i={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},o=a.replace(/{([ymdhisa])+}/g,(function(t,e){var n=i[e];return"a"===e?["日","一","二","三","四","五","六"][n]:n.toString().padStart(2,"0")}));return o}function i(t){if(!t)return"";var e=t.replace(/\D/g,"");return 11===e.length?e.replace(/(\d{3})(\d{4})(\d{4})/,"$1 $2 $3"):10===e.length?e.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"):t}function o(t){if(!t)return"";var e=new Date(t),n=function(t){return t<10?"0".concat(t):t};return"".concat(e.getFullYear(),"-").concat(n(e.getMonth()+1),"-").concat(n(e.getDate())," ").concat(n(e.getHours()),":").concat(n(e.getMinutes()))}}}]);