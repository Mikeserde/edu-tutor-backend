(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f8d51a0"],{"0ccb":function(t,e,a){var r=a("50c4"),n=a("1148"),i=a("1d80"),o=Math.ceil,c=function(t){return function(e,a,c){var s,l,u=String(i(e)),d=u.length,f=void 0===c?" ":String(c),g=r(a);return g<=d||""==f?u:(s=g-d,l=n.call(f,o(s/f.length)),l.length>s&&(l=l.slice(0,s)),t?u+l:l+u)}};t.exports={start:c(!1),end:c(!0)}},1148:function(t,e,a){"use strict";var r=a("a691"),n=a("1d80");t.exports="".repeat||function(t){var e=String(n(this)),a="",i=r(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(a+=e);return a}},"13d5":function(t,e,a){"use strict";var r=a("23e7"),n=a("d58f").left,i=a("a640"),o=a("ae40"),c=i("reduce"),s=o("reduce",{1:0});r({target:"Array",proto:!0,forced:!c||!s},{reduce:function(t){return n(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1c31":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return i}));var r=a("b775");function n(t,e){return Object(r["a"])({url:"/reports/teacher-hours",method:"get",params:{startDate:t,endDate:e}})}function i(){return Object(r["a"])({url:"/reports/occupation-demand",method:"get"})}},"25f0":function(t,e,a){"use strict";var r=a("6eeb"),n=a("825a"),i=a("d039"),o=a("ad6d"),c="toString",s=RegExp.prototype,l=s[c],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=c;(u||d)&&r(RegExp.prototype,c,(function(){var t=n(this),e=String(t.source),a=t.flags,r=String(void 0===a&&t instanceof RegExp&&!("flags"in s)?o.call(t):a);return"/"+e+"/"+r}),{unsafe:!0})},"408a":function(t,e,a){var r=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},"41a8":function(t,e,a){"use strict";a("5084")},"4d90":function(t,e,a){"use strict";var r=a("23e7"),n=a("0ccb").start,i=a("9a0c");r({target:"String",proto:!0,forced:i},{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},5084:function(t,e,a){},"57d2":function(t,e,a){"use strict";a("dff4")},"64db":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-card",{attrs:{shadow:"never"}},[a("el-form",{ref:"queryForm",staticClass:"filter-form",attrs:{model:t.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"统计范围",prop:"dateRange"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-s-data",loading:t.loading},on:{click:t.handleQuery}},[t._v("查询统计")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:t.resetQuery}},[t._v("重置")])],1)],1)],1)],1),t.reportData.length>0?a("div",{staticClass:"stat-cards"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("stat-card",{attrs:{title:"总教师数",value:t.reportData.length,icon:"el-icon-user-solid",color:"#1890ff"}})],1),a("el-col",{attrs:{span:6}},[a("stat-card",{attrs:{title:"总课时数",value:t.totalHours,icon:"el-icon-timer",color:"#36cbcb",unit:"小时"}})],1),a("el-col",{attrs:{span:6}},[a("stat-card",{attrs:{title:"平均课时",value:t.averageHours,icon:"el-icon-office-building",color:"#faad14",unit:"小时/人"}})],1),a("el-col",{attrs:{span:6}},[a("stat-card",{attrs:{title:"最勤奋教师",value:t.busiestTeacher.teacherName,"sub-value":t.busiestTeacher.totalHours+"小时",icon:"el-icon-medal-1",color:"#52c41a"}})],1)],1)],1):t._e(),a("el-card",{staticStyle:{"margin-top":"20px"},attrs:{shadow:"never"}},[t.reportData.length>0?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"data-table",staticStyle:{width:"100%"},attrs:{data:t.paginatedData,border:"",stripe:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"教师ID",prop:"teacherId",align:"center","min-width":"100"}}),a("el-table-column",{attrs:{label:"教师姓名",prop:"teacherName",align:"center","min-width":"120"}}),a("el-table-column",{attrs:{label:"总课时(小时)",align:"center","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("span",{staticClass:"hours-value"},[t._v(t._s(r.totalHours))])]}}],null,!1,3985794086)})],1):a("el-empty",{staticClass:"no-data",attrs:{description:"暂无数据"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.resetQuery}},[t._v("重置查询")])],1),t.reportData.length>t.pageSize?a("div",{staticClass:"table-pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.reportData.length,layout:"prev, pager, next"},on:{"current-change":t.handlePageChange}})],1):t._e()],1)],1)},n=[],i=a("c7eb"),o=a("1da1"),c=(a("99af"),a("13d5"),a("fb6a"),a("b680"),a("d3b7"),a("25f0"),a("4d90"),a("0643"),a("4e3e"),a("9d4a"),a("159b"),a("1c31")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"stat-card",style:{borderLeft:"4px solid "+t.color},attrs:{shadow:"hover"}},[a("div",{staticClass:"stat-content"},[a("div",{staticClass:"stat-icon",style:{background:t.color}},[a("i",{class:t.icon,staticStyle:{"font-size":"24px",color:"white"}})]),a("div",{staticClass:"stat-info"},[a("div",{staticClass:"stat-title"},[t._v(t._s(t.title))]),a("div",{staticClass:"stat-value"},[t._v(t._s(t.formatValue(t.value))+t._s(t.unit))]),t.subValue?a("div",{staticClass:"stat-sub"},[t._v(t._s(t.subValue))]):t._e()])])])},l=[],u=(a("a9e3"),{name:"StatCard",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0},icon:{type:String,default:"el-icon-data-line"},color:{type:String,default:"#1890ff"},unit:{type:String,default:""},subValue:{type:String,default:""}},methods:{formatValue:function(t){return"number"===typeof t?t.toLocaleString():t}}}),d=u,f=(a("41a8"),a("2877")),g=Object(f["a"])(d,s,l,!1,null,"bb40c816",null),h=g.exports,p={name:"TeacherHoursReport",components:{StatCard:h},data:function(){return{loading:!1,reportData:[],dateRange:[this.getDefaultStartDate(),this.getDefaultEndDate()],pickerOptions:{shortcuts:[{text:"本周",onClick:function(t){var e=new Date,a=new Date;a.setDate(a.getDate()-a.getDay()),t.$emit("pick",[a,e])}},{text:"本月",onClick:function(t){var e=new Date,a=new Date;a.setDate(1),t.$emit("pick",[a,e])}},{text:"上月",onClick:function(t){var e=new Date;e.setMonth(e.getMonth()),e.setDate(0);var a=new Date;a.setDate(1),a.setMonth(a.getMonth()-1),t.$emit("pick",[a,e])}},{text:"本年",onClick:function(t){var e=new Date,a=e.getFullYear(),r=new Date(a,0,1),n=new Date(a,11,31);t.$emit("pick",[r,n])}}]},queryParams:{},currentPage:1,pageSize:10}},computed:{paginatedData:function(){var t=(this.currentPage-1)*this.pageSize,e=t+this.pageSize;return this.reportData.slice(t,e)},totalHours:function(){return this.reportData.reduce((function(t,e){return t+e.totalHours}),0)},averageHours:function(){return this.reportData.length>0?(this.totalHours/this.reportData.length).toFixed(2):0},busiestTeacher:function(){if(0===this.reportData.length)return{teacherName:"-",totalHours:0};var t=this.reportData[0];return this.reportData.forEach((function(e){e.totalHours>t.totalHours&&(t=e)})),{teacherId:t.teacherId,teacherName:t.teacherName||"教师".concat(t.teacherId),totalHours:t.totalHours}}},created:function(){this.loadReport()},methods:{getDefaultStartDate:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth();return this.formatDate(new Date(e,a,1))},getDefaultEndDate:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth(),r=new Date(e,a+1,0);return this.formatDate(r)},formatDate:function(t){if(!t)return"";var e=t.getFullYear(),a=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0");return"".concat(e,"-").concat(a,"-").concat(r)},loadReport:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var a,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.dateRange&&2===t.dateRange.length){e.next=3;break}return t.$message.warning("请选择日期范围"),e.abrupt("return");case 3:return e.prev=3,t.loading=!0,e.next=7,Object(c["b"])(t.dateRange[0],t.dateRange[1]);case 7:a=e.sent,console.log("API响应数据:",a),2e4===a.code?(t.reportData=(null===(r=a.data)||void 0===r?void 0:r.list)||[],0===t.reportData.length&&t.$message.info("所选日期范围内没有数据")):t.$message.error(a.message||"获取数据失败"),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](3),console.error("获取教师工时统计失败:",e.t0),t.$message.error("获取统计数据失败");case 16:return e.prev=16,t.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,12,16,19]])})))()},handleQuery:function(){this.currentPage=1,this.loadReport()},resetQuery:function(){var t=this;this.dateRange=[this.getDefaultStartDate(),this.getDefaultEndDate()],this.$nextTick((function(){t.handleQuery()}))},handlePageChange:function(t){this.currentPage=t}}},v=p,b=(a("57d2"),Object(f["a"])(v,r,n,!1,null,"85c5d74a",null));e["default"]=b.exports},"9a0c":function(t,e,a){var r=a("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},"9d4a":function(t,e,a){"use strict";var r=a("23e7"),n=a("2266"),i=a("1c0b"),o=a("825a");r({target:"Iterator",proto:!0,real:!0},{reduce:function(t){o(this),i(t);var e=arguments.length<2,a=e?void 0:arguments[1];if(n(this,(function(r){e?(e=!1,a=r):a=t(a,r)}),void 0,!1,!0),e)throw TypeError("Reduce of empty iterator with no initial value");return a}})},b680:function(t,e,a){"use strict";var r=a("23e7"),n=a("a691"),i=a("408a"),o=a("1148"),c=a("d039"),s=1..toFixed,l=Math.floor,u=function(t,e,a){return 0===e?a:e%2===1?u(t,e-1,a*t):u(t*t,e/2,a)},d=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},f=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){s.call({})}));r({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,a,r,c,s=i(this),f=n(t),g=[0,0,0,0,0,0],h="",p="0",v=function(t,e){var a=-1,r=e;while(++a<6)r+=t*g[a],g[a]=r%1e7,r=l(r/1e7)},b=function(t){var e=6,a=0;while(--e>=0)a+=g[e],g[e]=l(a/t),a=a%t*1e7},m=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==g[t]){var a=String(g[t]);e=""===e?a:e+o.call("0",7-a.length)+a}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(h="-",s=-s),s>1e-21)if(e=d(s*u(2,69,1))-69,a=e<0?s*u(2,-e,1):s/u(2,e,1),a*=4503599627370496,e=52-e,e>0){v(0,a),r=f;while(r>=7)v(1e7,0),r-=7;v(u(10,r,1),0),r=e-1;while(r>=23)b(1<<23),r-=23;b(1<<r),v(1,1),b(2),p=m()}else v(0,a),v(1<<-e,0),p=m()+o.call("0",f);return f>0?(c=p.length,p=h+(c<=f?"0."+o.call("0",f-c)+p:p.slice(0,c-f)+"."+p.slice(c-f))):p=h+p,p}})},d58f:function(t,e,a){var r=a("1c0b"),n=a("7b0b"),i=a("44ad"),o=a("50c4"),c=function(t){return function(e,a,c,s){r(a);var l=n(e),u=i(l),d=o(l.length),f=t?d-1:0,g=t?-1:1;if(c<2)while(1){if(f in u){s=u[f],f+=g;break}if(f+=g,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=g)f in u&&(s=a(s,u[f],f,l));return s}};t.exports={left:c(!1),right:c(!0)}},dff4:function(t,e,a){}}]);