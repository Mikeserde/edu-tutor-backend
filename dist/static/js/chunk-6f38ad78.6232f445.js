(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f38ad78"],{9977:function(e,t,a){"use strict";a("e8fc")},cddd:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"注意",type:"info",closable:!1,description:"收费数据由系统自动计算生成，无法手动修改"}}),a("div",{staticClass:"filter-container"},[a("el-form",{ref:"queryForm",staticClass:"filter-form",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{attrs:{label:"职业ID",prop:"occupationId"}},[a("el-input",{attrs:{placeholder:"输入职业ID",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.occupationId,callback:function(t){e.$set(e.queryParams,"occupationId",e._n(t))},expression:"queryParams.occupationId"}})],1),a("el-form-item",{attrs:{label:"支付日期",prop:"dateRange"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1)],1),a("el-card",{staticStyle:{"margin-top":"20px"},attrs:{shadow:"never"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"data-table",attrs:{data:e.paymentList,border:"",stripe:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"ID",prop:"paymentId",align:"center","min-width":"80"}}),a("el-table-column",{attrs:{label:"职业ID",prop:"occupationId",align:"center","min-width":"100"}}),a("el-table-column",{attrs:{label:"支付日期",prop:"paymentDate",align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.formatDate(a.paymentDate))+" ")]}}])}),a("el-table-column",{attrs:{label:"金额",prop:"amount",align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v("¥"+e._s(r.amount.toFixed(2)))])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","current-page":e.queryParams.pageNum,"page-sizes":[10,20,50,100],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:current-page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:pageSize":function(t){return e.$set(e.queryParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.queryParams,"pageSize",t)},"size-change":e.getList,"current-change":e.getList}})],1)],1)},n=[],i=a("c7eb"),s=a("5530"),o=a("1da1"),l=(a("b64b"),a("d3b7"),a("0643"),a("4e3e"),a("159b"),a("b775"));function c(e){return Object(l["a"])({url:"/payments",method:"get",params:e})}var u={name:"PaymentList",data:function(){return{loading:!0,paymentList:[],total:0,queryParams:{pageNum:1,pageSize:10,occupationId:null},dateRange:[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,a=Object(s["a"])({},e.queryParams),e.dateRange&&2===e.dateRange.length&&(a.startDate=e.dateRange[0],a.endDate=e.dateRange[1]),Object.keys(a).forEach((function(e){null!==a[e]&&""!==a[e]&&void 0!==a[e]||delete a[e]})),t.next=7,c(a);case 7:r=t.sent,r.data&&r.data.page&&r.data.page.records?(e.paymentList=r.data.page.records,e.total=r.data.page.total):(console.warn("API返回数据格式不符:",r),e.$message.warning("返回数据格式异常")),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](1),console.error("获取支付记录失败:",t.t0),e.$message.error("获取支付记录失败");case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,11,15,18]])})))()},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.$refs.queryForm.resetFields(),this.dateRange=[],this.queryParams={pageNum:1,pageSize:this.queryParams.pageSize,occupationId:null},this.handleQuery()},formatDate:function(e){if(!e)return"";try{var t=new Date(e);return t.toISOString().split("T")[0]}catch(a){return console.error("日期格式化错误:",a),e}}}},p=u,d=(a("9977"),a("2877")),m=Object(d["a"])(p,r,n,!1,null,"48af14a6",null);t["default"]=m.exports},e8fc:function(e,t,a){}}]);