(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1471ac34"],{"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("ac1f"),n("00b4"),n("25f0"),n("3ca3");var r=n("6b75");function a(t,e){if(t){if("string"==typeof t)return Object(r["a"])(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(t,e):void 0}}},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),a=n("825a"),c=n("d039"),o=n("ad6d"),u="toString",i=RegExp.prototype,s=i[u],l=c((function(){return"/a/b"!=s.call({source:"a",flags:"b"})})),f=s.name!=u;(l||f)&&r(RegExp.prototype,u,(function(){var t=a(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in i)?o.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},"4df4":function(t,e,n){"use strict";var r=n("0366"),a=n("7b0b"),c=n("9bdd"),o=n("e95a"),u=n("50c4"),i=n("8418"),s=n("35a1");t.exports=function(t){var e,n,l,f,p,d,b=a(t),m="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,v=void 0!==g,k=s(b),y=0;if(v&&(g=r(g,h>2?arguments[2]:void 0,2)),void 0==k||m==Array&&o(k))for(e=u(b.length),n=new m(e);e>y;y++)d=v?g(b[y],y):b[y],i(n,y,d);else for(f=k.call(b),p=f.next,n=new m;!(l=p.call(f)).done;y++)d=v?c(f,g,[l.value,y],!0):l.value,i(n,y,d);return n.length=y,n}},"50a4":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",[n("div",{staticStyle:{"margin-bottom":"20px"}},[n("el-input",{staticStyle:{width:"300px","margin-right":"10px"},attrs:{placeholder:"请输入备份备注"},model:{value:t.backupComment,callback:function(e){t.backupComment=e},expression:"backupComment"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.handleCreate}},[t._v("备份数据库")]),n("el-button",{attrs:{type:"warning",icon:"el-icon-delete"},on:{click:t.handleClean}},[t._v("清理备份")])],1),n("el-table",{attrs:{data:t.backupList,border:"",stripe:""}},[n("el-table-column",{attrs:{prop:"backupId",label:"编号",width:"80"}}),n("el-table-column",{attrs:{prop:"comment",label:"备注"}}),n("el-table-column",{attrs:{prop:"backupTime",label:"创建时间",width:"180",formatter:t.formatDateTime}}),n("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){return t.handleRestore(e.row.backupId)}}},[t._v("恢复")])]}}])})],1)],1)],1)},a=[];function c(t){if(Array.isArray(t))return t}n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function o(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,c,o,u=[],i=!0,s=!1;try{if(c=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(u.push(r.value),u.length!==e);i=!0);}catch(t){s=!0,a=t}finally{try{if(!i&&null!=n["return"]&&(o=n["return"](),Object(o)!==o))return}finally{if(s)throw a}}return u}}var u=n("06c5");function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return c(t)||o(t,e)||Object(u["a"])(t,e)||i()}n("d81d"),n("a9e3"),n("0643"),n("a573");var l=n("b775");function f(t){return Object(l["a"])({url:"/backup-records",method:"post",params:{comment:t}})}function p(t){return Object(l["a"])({url:"/backup-records/".concat(t),method:"put"})}function d(t,e){return Object(l["a"])({url:"/backup-records",method:"delete",params:{keepCount:t,keepDays:e}})}function b(){return Object(l["a"])({url:"/backup-records",method:"get"})}var m=n("5c96"),h={name:"DatabaseManagement",data:function(){return{backupList:[],backupComment:""}},created:function(){this.fetchBackups()},methods:{fetchBackups:function(){var t=this;b().then((function(e){t.backupList=e.data.backups||[]})).catch((function(){m["Message"].error("获取备份列表失败")}))},formatDateTime:function(t,e,n){if(!n)return"";var r=new Date(n);return r.toLocaleString()},handleCreate:function(){var t=this;if(!this.backupComment)return m["Message"].warning("请输入备份备注");f(this.backupComment).then((function(){m["Message"].success("数据库备份成功"),t.backupComment="",t.fetchBackups()})).catch((function(){m["Message"].error("数据库备份失败")}))},handleRestore:function(t){m["MessageBox"].confirm("确认要恢复此备份吗？操作不可撤销！","警告",{type:"warning"}).then((function(){p(t).then((function(){m["Message"].success("数据库恢复成功")})).catch((function(){m["Message"].error("数据库恢复失败")}))})).catch((function(){}))},handleClean:function(){var t=this;m["MessageBox"].prompt("请输入保留的备份数量和天数（格式：数量,天数）","清理备份",{inputPattern:/^\d+,\d+$/,inputErrorMessage:"格式错误，应为数字,数字"}).then((function(e){var n=e.value,r=n.split(",").map(Number),a=s(r,2),c=a[0],o=a[1];d(c,o).then((function(){m["Message"].success("备份清理成功"),t.fetchBackups()})).catch((function(){m["Message"].error("备份清理失败")}))})).catch((function(){}))}}},g=h,v=n("2877"),k=Object(v["a"])(g,r,a,!1,null,null,null);e["default"]=k.exports},"6b75":function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},a630:function(t,e,n){var r=n("23e7"),a=n("4df4"),c=n("1c7e"),o=!c((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:o},{from:a})}}]);