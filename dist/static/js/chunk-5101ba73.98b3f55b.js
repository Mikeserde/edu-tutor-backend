(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5101ba73"],{"0ccb":function(e,t,r){var n=r("50c4"),a=r("1148"),i=r("1d80"),s=Math.ceil,o=function(e){return function(t,r,o){var c,l,u=String(i(t)),f=u.length,d=void 0===o?" ":String(o),g=n(r);return g<=f||""==d?u:(c=g-f,l=a.call(d,s(c/d.length)),l.length>c&&(l=l.slice(0,c)),e?u+l:l+u)}};e.exports={start:o(!1),end:o(!0)}},1148:function(e,t,r){"use strict";var n=r("a691"),a=r("1d80");e.exports="".repeat||function(e){var t=String(a(this)),r="",i=n(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(r+=t);return r}},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"14c3":function(e,t,r){var n=r("c6b6"),a=r("9263");e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var i=r.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"25f0":function(e,t,r){"use strict";var n=r("6eeb"),a=r("825a"),i=r("d039"),s=r("ad6d"),o="toString",c=RegExp.prototype,l=c[o],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=o;(u||f)&&n(RegExp.prototype,o,(function(){var e=a(this),t=String(e.source),r=e.flags,n=String(void 0===r&&e instanceof RegExp&&!("flags"in c)?s.call(e):r);return"/"+t+"/"+n}),{unsafe:!0})},"2c3e":function(e,t,r){var n=r("83ab"),a=r("9f7f").UNSUPPORTED_Y,i=r("9bf2").f,s=r("69f3").get,o=RegExp.prototype;n&&a&&i(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==o){if(this instanceof RegExp)return!!s(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},"4d63":function(e,t,r){var n=r("83ab"),a=r("da84"),i=r("94ca"),s=r("7156"),o=r("9bf2").f,c=r("241c").f,l=r("44e7"),u=r("ad6d"),f=r("9f7f"),d=r("6eeb"),g=r("d039"),p=r("69f3").set,h=r("2626"),m=r("b622"),v=m("match"),b=a.RegExp,y=b.prototype,w=/a/g,x=/a/g,E=new b(w)!==w,$=f.UNSUPPORTED_Y,S=n&&i("RegExp",!E||$||g((function(){return x[v]=!1,b(w)!=w||b(x)==x||"/a/i"!=b(w,"i")})));if(S){var _=function(e,t){var r,n=this instanceof _,a=l(e),i=void 0===t;if(!n&&a&&e.constructor===_&&i)return e;E?a&&!i&&(e=e.source):e instanceof _&&(i&&(t=u.call(e)),e=e.source),$&&(r=!!t&&t.indexOf("y")>-1,r&&(t=t.replace(/y/g,"")));var o=s(E?new b(e,t):b(e,t),n?this:y,_);return $&&r&&p(o,{sticky:r}),o},R=function(e){e in _||o(_,e,{configurable:!0,get:function(){return b[e]},set:function(t){b[e]=t}})},C=c(b),U=0;while(C.length>U)R(C[U++]);y.constructor=_,_.prototype=y,d(a,"RegExp",_)}h("RegExp")},"4d90":function(e,t,r){"use strict";var n=r("23e7"),a=r("0ccb").start,i=r("9a0c");n({target:"String",proto:!0,forced:i},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5319:function(e,t,r){"use strict";var n=r("d784"),a=r("825a"),i=r("7b0b"),s=r("50c4"),o=r("a691"),c=r("1d80"),l=r("8aa5"),u=r("14c3"),f=Math.max,d=Math.min,g=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,m=function(e){return void 0===e?e:String(e)};n("replace",2,(function(e,t,r,n){var v=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=n.REPLACE_KEEPS_$0,y=v?"$":"$0";return[function(r,n){var a=c(this),i=void 0==r?void 0:r[e];return void 0!==i?i.call(r,a,n):t.call(String(a),r,n)},function(e,n){if(!v&&b||"string"===typeof n&&-1===n.indexOf(y)){var i=r(t,e,this,n);if(i.done)return i.value}var c=a(e),g=String(this),p="function"===typeof n;p||(n=String(n));var h=c.global;if(h){var x=c.unicode;c.lastIndex=0}var E=[];while(1){var $=u(c,g);if(null===$)break;if(E.push($),!h)break;var S=String($[0]);""===S&&(c.lastIndex=l(g,s(c.lastIndex),x))}for(var _="",R=0,C=0;C<E.length;C++){$=E[C];for(var U=String($[0]),T=f(d(o($.index),g.length),0),k=[],D=1;D<$.length;D++)k.push(m($[D]));var L=$.groups;if(p){var P=[U].concat(k,T,g);void 0!==L&&P.push(L);var O=String(n.apply(void 0,P))}else O=w(U,g,T,k,L,n);T>=R&&(_+=g.slice(R,T)+O,R=T+U.length)}return _+g.slice(R)}];function w(e,r,n,a,s,o){var c=n+e.length,l=a.length,u=h;return void 0!==s&&(s=i(s),u=p),t.call(o,u,(function(t,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,n);case"'":return r.slice(c);case"<":o=s[i.slice(1,-1)];break;default:var u=+i;if(0===u)return t;if(u>l){var f=g(u/10);return 0===f?t:f<=l?void 0===a[f-1]?i.charAt(1):a[f-1]+i.charAt(1):t}o=a[u-1]}return void 0===o?"":o}))}}))},"67b9":function(e,t,r){},"841c":function(e,t,r){"use strict";var n=r("d784"),a=r("825a"),i=r("1d80"),s=r("129f"),o=r("14c3");n("search",1,(function(e,t,r){return[function(t){var r=i(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var i=a(e),c=String(this),l=i.lastIndex;s(l,0)||(i.lastIndex=0);var u=o(i,c);return s(i.lastIndex,l)||(i.lastIndex=l),null===u?-1:u.index}]}))},"8a86":function(e,t,r){"use strict";r("67b9")},"8aa5":function(e,t,r){"use strict";var n=r("6547").charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},"92bb":function(e,t,r){},"9a0c":function(e,t,r){var n=r("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},d784:function(e,t,r){"use strict";r("ac1f");var n=r("6eeb"),a=r("d039"),i=r("b622"),s=r("9263"),o=r("9112"),c=i("species"),l=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),f=i("replace"),d=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),g=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));e.exports=function(e,t,r,f){var p=i(e),h=!a((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),m=h&&!a((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[c]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return t=!0,null},r[p](""),!t}));if(!h||!m||"replace"===e&&(!l||!u||d)||"split"===e&&!g){var v=/./[p],b=r(p,""[e],(function(e,t,r,n,a){return t.exec===s?h&&!a?{done:!0,value:v.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=b[0],w=b[1];n(String.prototype,e,y),n(RegExp.prototype,p,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}f&&o(RegExp.prototype[p],"sham",!0)}},e382:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v(" 新建用户 ")]),r("el-input",{staticClass:"filter-item",staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"搜索用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.search,callback:function(t){e.$set(e.listQuery,"search",t)},expression:"listQuery.search"}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"user-table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.userList,"element-loading-text":"数据加载中",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[r("el-avatar",{staticClass:"user-avatar",attrs:{size:32}},[e._v(" "+e._s(t.row.username.charAt(0).toUpperCase())+" ")]),r("div",{staticStyle:{"margin-left":"8px"}},[e._v(" "+e._s(t.row.username)+" "),"admin"===t.row.username?r("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v(" 管理员 ")]):e._e()],1)],1)]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作",width:"500",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"action-cell"},[r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",disabled:"admin"===t.row.username},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v(" 删除 ")]),r("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-refresh"},on:{click:function(r){return e.handleResetPassword(t.row)}}},[e._v(" 重置密码 ")])],1)]}}])})],1),r("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"left"},attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[10,20,50,100],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("user-dialog",{attrs:{visible:e.dialogVisible,"dialog-type":e.dialogType,"user-data":e.currentUser},on:{"update:visible":function(t){e.dialogVisible=t},create:e.handleCreateUser,update:e.handleUpdateUser}})],1)},a=[],i=(r("ac1f"),r("841c"),r("c24f")),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"create"===e.dialogType?"新建用户":"编辑用户",visible:e.visible,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t},close:e.handleClose}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{disabled:"edit"===e.dialogType,placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),"create"===e.dialogType?r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),"edit"===e.dialogType?r("el-form-item",{attrs:{label:"重置密码"}},[r("el-input",{attrs:{type:"password",placeholder:"输入新密码（留空则不修改）","show-password":""},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1):e._e()],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.handleClose}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确认")])],1)],1)},o=[],c={name:"UserDialog",props:{visible:{type:Boolean,default:!1},dialogType:{type:String,default:"create"},userData:{type:Object,default:function(){return{}}}},data:function(){return{form:{username:"",password:"",newPassword:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少 6 个字符",trigger:"blur"}]}}},watch:{visible:function(e){e&&(this.resetForm(),"edit"===this.dialogType&&(this.form.username=this.userData.username))}},methods:{resetForm:function(){this.form={username:"",password:"",newPassword:""}},handleClose:function(){this.$emit("update:visible",!1)},handleSubmit:function(){var e=this;this.$refs.form.validate((function(t){t&&("create"===e.dialogType?e.createUser():e.updateUser())}))},createUser:function(){this.$emit("create",{username:this.form.username,password:this.form.password}),this.handleClose()},updateUser:function(){var e={username:this.form.username,newPassword:this.form.newPassword};this.$emit("update",e),this.handleClose()}}},l=c,u=(r("f5f9"),r("2877")),f=Object(u["a"])(l,s,o,!1,null,"7569be78",null),d=f.exports,g=r("ed08"),p={name:"UserList",components:{UserDialog:d},data:function(){return{userList:[],total:0,listLoading:!0,listQuery:{page:1,limit:10,search:""},dialogVisible:!1,dialogType:"create",currentUser:{}}},created:function(){this.fetchData()},methods:{formatDate:g["a"],fetchData:function(){var e=this;this.listLoading=!0;var t=this.listQuery,r=t.page,n=t.limit,a=t.search;Object(i["d"])(r,n,a).then((function(t){if(2e4===t.code){var r=t.data.page;e.userList=r.records,e.total=r.total}else e.$message.error(t.message||"获取用户列表失败");e.listLoading=!1})).catch((function(t){e.listLoading=!1,console.error("获取用户列表失败:",t),e.$message.error("获取用户列表失败")}))},handleSizeChange:function(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange:function(e){this.listQuery.page=e,this.fetchData()},handleFilter:function(){this.listQuery.page=1,this.fetchData()},handleCreate:function(){this.dialogType="create",this.currentUser={},this.dialogVisible=!0},handleResetPassword:function(e){var t=this;this.$prompt("请输入新密码","重置密码",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{6,}$/,inputErrorMessage:"密码长度至少6位"}).then((function(r){var n=r.value;t.listLoading=!0,Object(i["g"])(e.username,n).then((function(e){2e4===e.code?t.$message.success("密码重置成功"):t.$message.error(e.message||"密码重置失败"),t.listLoading=!1})).catch((function(){t.listLoading=!1,t.$message.error("密码重置失败")}))})).catch((function(){}))},handleCreateUser:function(e){var t=this;this.listLoading=!0,Object(i["a"])(e).then((function(e){2e4===e.code?(t.$message.success("用户创建成功"),t.fetchData()):t.$message.error(e.message||"用户创建失败"),t.listLoading=!1})).catch((function(){t.listLoading=!1,t.$message.error("用户创建失败")}))},handleUpdateUser:function(e){var t=this;this.listLoading=!0,setTimeout((function(){t.$message.success("用户信息更新成功"),e.newPassword&&t.$message.info("密码已重置"),t.listLoading=!1,t.fetchData()}),500)},handleDelete:function(e){var t=this;this.$confirm("确定删除用户 ".concat(e.username," 吗？"),"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.listLoading=!0,Object(i["b"])(e.username).then((function(e){2e4===e.code?(t.$message.success("删除成功"),1===t.userList.length&&t.listQuery.page>1&&(t.listQuery.page-=1),t.fetchData()):(t.$message.error(e.message||"删除失败"),t.listLoading=!1)})).catch((function(){t.listLoading=!1,t.$message.error("删除失败")}))})).catch((function(){}))}}},h=p,m=(r("8a86"),Object(u["a"])(h,n,a,!1,null,"5c78a31d",null));t["default"]=m.exports},ed08:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return s}));var n=r("53ca");r("99af"),r("d3b7"),r("4d63"),r("ac1f"),r("2c3e"),r("00b4"),r("25f0"),r("4d90"),r("5319"),r("0643"),r("4e3e"),r("159b");function a(e,t){if(0===arguments.length||!e)return null;var r,a=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(n["a"])(e)?r=e:("string"===typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e):e.replace(new RegExp(/-/gm),"/")),"number"===typeof e&&10===e.toString().length&&(e*=1e3),r=new Date(e));var i={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()},s=a.replace(/{([ymdhisa])+}/g,(function(e,t){var r=i[t];return"a"===t?["日","一","二","三","四","五","六"][r]:r.toString().padStart(2,"0")}));return s}function i(e){if(!e)return"";var t=e.replace(/\D/g,"");return 11===t.length?t.replace(/(\d{3})(\d{4})(\d{4})/,"$1 $2 $3"):10===t.length?t.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"):e}function s(e){if(!e)return"";var t=new Date(e),r=function(e){return e<10?"0".concat(e):e};return"".concat(t.getFullYear(),"-").concat(r(t.getMonth()+1),"-").concat(r(t.getDate())," ").concat(r(t.getHours()),":").concat(r(t.getMinutes()))}},f5f9:function(e,t,r){"use strict";r("92bb")}}]);